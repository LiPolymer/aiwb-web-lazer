---
import { Svg } from 'astro-pure/user'
import { cn } from 'astro-pure/utils'

import AiwbMaintainingStatusBadge from '../AiwbMaintainingStatusBadge.astro'

interface Props {
  class?: string
  title: string
  tools: {
    name: string
    name_en: string
    codename: string
    short_description: string
    alternative_names: string[]
    featured: boolean
    description: string
    slogan: string
    maintaining_status: 'active' | 'discountinued' | 'paused'
    slug: string
    icon: string
  }[]
}

const { class: className, title, tools: tools, ...props } = Astro.props
---

<div
  class={cn('not-prose flex flex-col rounded-xl border py-3 px-3 gap-y-3 sm:gap-y-4', className)}
  {...props}
>
  <div class='m-0 px-2 text-lg font-medium'>{title}</div>
  <div class='grid grid-cols-1 gap-x-2 gap-y-2 sm:grid-cols-2'>
    {
      tools.map((tool) => (
        <a
          class='group relative text-sm leading-normal no-underline'
          id={tool.codename}
          href={`/apps/${tool.slug}`}
          target='_blank'
        >
          <div class='flex items-center gap-x-3 rounded-lg border border-transparent px-2 py-1.5 transition-colors hover:border-border hover:bg-muted'>
            {tool.icon ? (
              <img
                src={tool.icon}
                alt=''
                class='size-11 object-contain rounded-lg bg-primary-foreground fill-foreground p-1.5'
              />
            ) : (
              <svg xmlns='http://www.w3.org/2000/svg' class="size-11 rounded-lg bg-primary-foreground fill-foreground p-1.5" width='24' height='24' viewBox='0 0 24 24'>
                <g fill='none'>
                  <path d='M24 0v24H0V0zM12.593 23.258l-.011.002-.071.035-.02.004-.014-.004-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01-.017.428.005.02.01.013.104.074.015.004.012-.004.104-.074.012-.016.004-.017-.017-.427c-.002-.01-.009-.017-.017-.018m.265-.113-.013.002-.185.093-.01.01-.003.011.018.43.005.012.008.007.201.093c.012.004.023 0 .029-.008l.004-.014-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014-.034.614c0 .012.007.02.017.024l.015-.002.201-.093.01-.008.004-.011.017-.43-.003-.012-.01-.01z' />
                  <path
                    fill='currentColor'
                    d='M21 13v7.434a1.5 1.5 0 0 1-1.553 1.499l-.133-.011L12 21.008V13zm-11 0v7.758l-5.248-.656A2 2 0 0 1 3 18.117V13zm9.314-10.922a1.5 1.5 0 0 1 1.68 1.355l.006.133V11h-9V2.992zM10 3.242V11H3V5.883a2 2 0 0 1 1.752-1.985z'
                  />
                </g>
              </svg>
            )}
            <div class='z-20 flex flex-col gap-y-0.5'>
              <div class='flex flex-row items-center justify-star'>
                <div class='font-medium text-base text-foreground'>{tool.name}</div>
                {tool.slogan?(
                  <div class='font-medium text-base text-foreground:75 px-2'>Â·</div>
                  <div class='text-base font-medium text-foreground:75'>{tool.slogan}</div>
                ):null}
              </div>
              <div class='flex flex-row items-center justify-start gap-x-1.5'>
                <AiwbMaintainingStatusBadge status={tool.maintaining_status} />
                <div class='font-normal text-foreground:60'>{tool.short_description}</div>
              </div>
            </div>
          </div>
        </a>
      ))
    }
  </div>
</div>
